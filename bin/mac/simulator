#!/bin/bash
#                                                                     @@@@@@@@@@
#                                                          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#                                                    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#                                               @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#                                            @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#                                         @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#                                      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#                                   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#                                 @@@@@@@@@@@@@@@@@@@@@@@@@@@@   @@@@@@@@@@          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#                               @@@@@@@@@@@@@@@@@@@@@@@@            @@@@@@@                 @@@@@@@@@@@@@@@@@@@@@@@@@@
#                             @@@@@@@@@@@@@@@@@@@@@@                  @@@@@@                     @@@@@@@@@@@@@@@@@@@@@@@
#                            @@@@@@@@@@@@@@@@@@@@                      @@@@@                         @@@@@@@@@@@@@@@@@@@@
#                          @@@@@@@@@@@@@@@@@@@@                         @@@@@                           @@@@@@@@@@@@@@@@@@@
#                         @@@@@@@@@@@@@@@@@@@                           @@@@@@                            @@@@@@@@@@@@@@@@@@
#                       @@@@@@@@@@@@@@@@@@@                             @@@@@@@                             @@@@@@@@@@@@@@@@@@
#                      @@@@@@@@@@@@@@@@@@@                            @@@@@@@@@@@                             @@@@@@@@@@@@@@@@@
#                     @@@@@@@@@@@@@@@@@@                             @@@@@@@@@@@@@@                            @@@@@@@@@@@@@@@@@
#                    @@@@@@@@@@@@@@@@@@                           @@@@@@@@@@@@@@@@@@                            @@@@@@@@@@@@@@@@@
#                   @@@@@@@@@@@@@@@@@                           @@@@@@@@@@@@@@@@@@@@@@@                         @@@@@@@@@@@@@@@@@@
#                   @@@@@@@@@@@@@@@@                         @@@@@@@@@@@@@@@@@@@@@@@@@@@@                       @@@@@@@@@@@@@@@@@@
#                  @@@@@@@@@@@@@@@@@                      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                   @@@@@@@@@@@@@@@@@@@@
#                 @@@@@@@@@@@@@@@@@                   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@               @@@@@@@@@@@@@@@@@@@@@@
#                 @@@@@@@@@@@@@@@@@              @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@        @@@@@@@@@@@@@@@@@@@@@@@@@
#                @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@   @@@@@@@@@@@@@@@@@
#                @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@       @@@@@@@@@@@@@@@@
#                @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@          @@@@@@@@@@@@@@@
#               @@@@@@@@@@@@@@@@@@@          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@            @@@@@@@@@@@@@@@@
#               @@@@@@@@@@@@@@@@               @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@               @@@@@@@@@@@@@@@
#               @@@@@@@@@@@@@@@                 @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                @@@@@@@@@@@@@@@
#               @@@@@@@@@@@@@@@                  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                 @@@@@@@@@@@@@@@
#               @@@@@@@@@@@@@@                    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                  @@@@@@@@@@@@@@@
#               @@@@@@@@@@@@@@                     @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                   @@@@@@@@@@@@@@@
#               @@@@@@@@@@@@@@@                    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                    @@@@@@@@@@@@@@@
#                @@@@@@@@@@@@@@                     @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                    @@@@@@@@@@@@@@@
#                @@@@@@@@@@@@@@                      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                     @@@@@@@@@@@@@@@
#                @@@@@@@@@@@@@@@                     @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                     @@@@@@@@@@@@@@@
#                 @@@@@@@@@@@@@@@                    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                     @@@@@@@@@@@@@@@
#                 @@@@@@@@@@@@@@@@                   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                     @@@@@@@@@@@@@@@
#                  @@@@@@@@@@@@@@@@                   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                    @@@@@@@@@@@@@@@
#                   @@@@@@@@@@@@@@@@                  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                   @@@@@@@@@@@@@@@
#                   @@@@@@@@@@@@@@@@@                 @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                  @@@@@@@@@@@@@@@@
#                    @@@@@@@@@@@@@@@@@@              @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                 @@@@@@@@@@@@@@@@
#                     @@@@@@@@@@@@@@@@@@             @@@@@@@@                          @@@@@@@@@@@@            @@@@@@@@@@@@@@@@@
#                      @@@@@@@@@@@@@@@@@@@           @@@@@                                  @@@@@@@@@@@     @@@@@@@@@@@@@@@@@@@
#                       @@@@@@@@@@@@@@@@@@@@        @@@@@                                       @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#                         @@@@@@@@@@@@@@@@@@@@     @@@@@@                                         @@@@@@@@@@@@@@@@@@@@@@@@@@
#                          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                                           @@@@@@@@@@@@@@@@@@@@@@@
#                            @@@@@@@@@@@@@@@@@@@@@@@@@@@@                                         @@@@@@@@@@@@@@@@@@@@@@@
#                             @@@@@@@@@@@@@@@@@@@@@@@@@@@                                      @@@@@@@@@@@@@@@@@@@@@@@@@
#                               @@@@@@@@@@@@@@@@@@@@@@@@@@@                                @@@@@@@@@@@@@@@@@@@@@@@@@@@
#                                 @@@@@@@@@@@@@@@@@@@@@@@@@@@@                       @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#                                   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#                                      @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#                                         @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#                                            @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#                                               @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#                                                    @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#                                                          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
#                                                                     @@@@@@@@@@
# 
# The text above becomes the icon preview thus addressing an issue with Dock grid mode which insists on displaying preview icons
#

DEFAULT_INSTALL="/Applications/CoronaSDK"
INSTALL_DIR=$(dirname "$0")

if [[ -f "${INSTALL_DIR}/Corona Simulator.app/Contents/MacOS/Corona Simulator" ]]
then
	CORONA_SIMULATOR="${INSTALL_DIR}/Corona Simulator.app/Contents/MacOS/Corona Simulator"
else
	CORONA_SIMULATOR="${DEFAULT_INSTALL}/Corona Simulator.app/Contents/MacOS/Corona Simulator"
fi

if [[ -f "${CORONA_SIMULATOR}" ]]
then
	echo "Running: '${CORONA_SIMULATOR}' -no-console YES " "$@"
	echo
	echo "Note: '$(basename "$0")' is deprecated.  You should run the 'Corona Simulator' application instead."
	echo
	"${CORONA_SIMULATOR}" -no-console YES "$@"
else
	echo "ERROR: Could not find 'Corona Simulator.app' in '${INSTALL_DIR}' or '${DEFAULT_INSTALL}'"
	exit 1
fi

if [ $? != 0 ]
then
	# wait for user input so any error message can be seen
	echo
	read -r -p '[Press Enter to exit] ' _ # read throw-away value
fi
